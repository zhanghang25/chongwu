webpackJsonp([7],{"0HZe":function(e,t){},"13DI":function(e,t,a){"use strict";function n(e){var t=this;v=e;var n=v,i=n.vue,s=n.listen_route,o=n.port,c=n.avatar,d=n.name,g=n.uid,p=n.store_id,w=n.is_ssl;h=new WebSocket(u(w)+":"+s+":"+o),h.onopen=function(){h.send(l()({name:d,avatar:c,origin:r()?"pc":"phone",store_id:p,uid:g,type:"login",user_type:"service"}))},h.onclose=function(){},h.onmessage=function(e){var n=JSON.parse(e.data);switch(n.message_type){case"come":if(n.uid===v.user.user_id)break;break;case"leave":if(n.uid===v.user_id||""!==n.uid)break;break;case"init":n.msg&&(t.status=1);break;case"come_msg":i.comeMessage(n);break;case"come_wait":i.comeWait(n);break;case"robbed":case"user_robbed":case"uoffline":case"close_link":break;case"others_login":m()({title:"提示",message:"您已被强迫下线！",cancelButtonText:"退出登录",confirmButtonText:"强制登录",showConfirmButton:!0,showCancelButton:!0,closeOnClickModal:!1}).then(function(e){"cancel"===e?a.i(f.b)({router:v.vue.$router,ws:!0}):window.location.reload()})}}}function i(e){var t=e.msg,a=e.uid,n=e.goods_id;return!(!t||""===t||v==={}||""===v.uid||void 0===v.uid)&&(h.send(l()({avatar:v.avatar,goods_id:n,msg:t,origin:r()?"pc":"phone",store_id:v.store_id,to_id:a,type:"sendmsg"})),{avatar:v.avatar,name:v.name})}function s(){h.close()}function o(e){var t=e.goods_id,a=e.uid,n=e.store_id;h.send(l()({from_id:v.uid,goods_id:t,msg:a,store_id:n,to_id:null,type:"info"}))}function r(){for(var e=navigator.userAgent,t=["Android","iPhone","SymbianOS","Windows Phone","iPad","iPod"],a=!0,n=0;n<t.length;n++)if(e.indexOf(t[n])>0){a=!1;break}return a}function u(e){return e?"wss":"ws"}a.d(t,"b",function(){return n}),a.d(t,"a",function(){return s}),a.d(t,"c",function(){return i}),a.d(t,"d",function(){return o});var c=a("OgVB"),d=(a.n(c),a("/Lyv")),m=a.n(d),g=a("mvHQ"),l=a.n(g),f=a("Pi6f"),h=null,v=null},"34+y":function(e,t){},"3lKj":function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("footer",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"}],staticClass:"message-footer",on:{click:function(t){e.showFaceDialog({bShow:!1})}}},[a("transition",{attrs:{name:"fade"}},[a("keep-alive",[e.bFace?a("face",{on:{"add-face":e.addFace}}):e._e()],1)],1),e._v(" "),a("div",{staticClass:"left"},[a("i",{staticClass:"iconfont icon-expression",on:{click:function(t){return t.stopPropagation(),e.showFaceDialog(t)}}})]),e._v(" "),a("div",{staticClass:"input",attrs:{contenteditable:"true"},on:{input:e.changMessage,click:e.scrollShow}}),e._v(" "),a("ec-button",{attrs:{text:"发送"},nativeOn:{click:function(t){e.thisSendMessage({msg:e.message,uid:e.$route.query.id,goods_id:e.$route.query.goods_id})}}})],1)},i=[],s={render:n,staticRenderFns:i};t.a=s},"48ln":function(e,t,a){"use strict";t.a={name:"ec-button",props:{text:{required:!0,type:String}}}},"6CWX":function(e,t,a){"use strict";function n(e){a("0HZe")}var i=a("RkRv"),s=a("yrzX"),o=a("VU/8"),r=n,u=o(i.a,s.a,!1,r,null,null);t.a=u.exports},"6yGq":function(e,t){},"9qGQ":function(e,t){},BwjS:function(e,t,a){"use strict";function n(e){a("MuOZ")}var i=a("Vym9"),s=a("3lKj"),o=a("VU/8"),r=n,u=o(i.a,s.a,!1,r,"data-v-6d089bb0",null);t.a=u.exports},EasE:function(e,t){},IcnI:function(e,t,a){"use strict";var n,i=a("bOdI"),s=a.n(i),o=a("Xu2r"),r=a("7+uW"),u=a("NYxO"),c=a("VAhz");r.default.use(u.c);var d={needPageTransition:!1,pageTransitionName:"",historyPageScrollTop:{},aFace:[],bFace:!1},m={saveScrollTop:function(e,t){var a=e.commit,n=t.path,i=t.scrollTop;a(o.a,{path:n,scrollTop:i})},getImageFiles:function(e){(0,e.commit)(o.b)},showFaceDialog:function(e,t){var a=e.commit,n=t.bShow;a(o.c,{bShow:n})}},g=(n={},s()(n,o.d,function(e,t){var a=t.pageTransitionName;e.pageTransitionName=a}),s()(n,o.a,function(e,t){var a=t.path,n=t.scrollTop;e.historyPageScrollTop[a]=n}),s()(n,o.b,function(e){for(var t=0;t<71;t++)e.aFace.push(t)}),s()(n,o.c,function(e,t){var a=t.bShow;e.bFace=void 0===a?!e.bFace:a}),n);t.a=new u.c.Store({state:d,actions:m,mutations:g,modules:{namespaced:!0,chat:c.a},strict:!1})},JOaO:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("footer",{directives:[{name:"show",rawName:"v-show",value:e.show&&e.navs.length,expression:"show && navs.length"}],staticClass:"chat-footer"},[a("ul",e._l(e.navs,function(t){return a("router-link",{key:t.name,class:{active:t.active},attrs:{to:t.route.path,tag:"li"}},[a("badge",{directives:[{name:"show",rawName:"v-show",value:t.number,expression:"item.number"}],attrs:{number:t.number}}),e._v(" "),a("i",{staticClass:"iconfont",class:"icon-"+t.icon}),e._v(" "),a("label",{attrs:{for:""}},[e._v(e._s(t.text))])],1)}))])},i=[],s={render:n,staticRenderFns:i};t.a=s},Kkag:function(e,t,a){"use strict";var n=a("34+y"),i=(a.n(n),a("X+yh")),s=a.n(i),o=a("//Fk"),r=a.n(o),u=a("7+uW"),c=a("mtWM"),d=a.n(c),m=a("Pi6f"),g=localStorage.getItem("token");d.a.defaults.headers.common.token=g||"",d.a.interceptors.request.use(function(e){return e},function(e){return r.a.reject(e)}),d.a.interceptors.response.use(function(e){return 1===e.data.code&&("用户登录已失效"===e.data.message&&(localStorage.removeItem("token"),localStorage.getItem("token")&&(m.b({router:null}),window.router.push("/chat/login")),window.router.push("/chat/login")),"该账号没有客服权限"===e.data.msg&&(s()({message:"该账号没有客服权限",position:"bottom",duration:2e3}),window.router.push("/chat/login"))),e},function(e){return r.a.reject(e)}),u.default.prototype.$http=d.a},M93x:function(e,t,a){"use strict";function n(e){a("EasE")}var i=a("xJD8"),s=a("V847"),o=a("VU/8"),r=n,u=o(i.a,s.a,!1,r,null,null);t.a=u.exports},MrDs:function(e,t,a){"use strict";var n=a("Zrlr"),i=a.n(n),s=a("wxAW"),o=a.n(s),r=a("Zw+j"),u=new r.a,c=function(){function e(){i()(this,e)}return o()(e,[{key:"messageNew",value:function(e){var t=u.updateImageTag(e);return u.delHtmlTag(t)}}]),e}();t.a=c},MuOZ:function(e,t){},NHnr:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("7+uW"),i=a("M93x"),s=a("YaEn"),o=a("IcnI");a("kBzv");n.default.config.productionTip=!1,new n.default({el:"#app",router:s.a,store:o.a,template:"<App/>",components:{App:i.a}})},OgVB:function(e,t){},Pi6f:function(e,t,a){"use strict";function n(){return b.a.post(window.requestUrl("chat&c=adminp"))}function i(){return b.a.get(window.requestUrl("chat&c=adminp&a=visit"))}function s(e){var t=e.id,a=e.sid,n=e.type,i=e.page,s=e.defaults;return b.a.post(window.requestUrl("chat&c=adminp&a=chatlist"),L.a.stringify({type:n||void 0,page:i||void 0,default:s||void 0,user_id:t,store_id:a}))}function o(e){var t=e.username,a=e.password,n=e.vue;w.a.open(),b.a.post(window.requestUrl("chat&c=login"),L.a.stringify({username:t,password:a})).then(function(e){var t=e.data,a=t.code,i=t.msg,s=t.token;t.user_id;w.a.close(),h()({message:i,position:"middle",iconClass:1===a?"iconfont icon-error":"iconfont icon-success",duration:1600}),0===a&&(localStorage.setItem("token",s),b.a.defaults.headers.common.token=s||"",n.$router.push({path:n.$route.query.redirect||"/chat"}),g(n))})}function r(e){var t=e.user_id,a=e.is_admin,n=e.connect_code;e.router;return b.a.post(window.requestUrl("chat&c=login"),L.a.stringify({login_type:"app_admin_login",user_id:t,is_admin:a,connect_code:n}))}function u(){return b.a.post(window.requestUrl("chat&c=adminp&a=serviceinfo"))}function c(e){var t=e.router,a=e.ws;w.a.open(),a||I.a(),b.a.get(window.requestUrl("chat&c=adminp&a=logout")).then(function(e){var a=e.data,n=a.message,i=a.code;if(w.a.close(),h()({message:n,position:"middle",duration:2e3}),0===i){localStorage.getItem("token")&&localStorage.removeItem("token"),t&&t.push({path:"/chat/login"}),window.location.reload()}})}function d(e){var t=e.userId;return b.a.get(window.requestUrl("chat&c=adminp&a=changemessagestatus&id="+t))}function m(e){var t=e.goodsId;return b.a.post(window.requestUrl("chat&c=adminp&a=goodsinfo"),L.a.stringify({gid:t}))}function g(e){b.a.post(window.requestUrl("chat&c=adminp&a=initinfo")).then(function(t){var a=t.data,n=a.code,i=(a.message,a.data);0===n&&(e.setAvigatorNumber({chatNum:i.chat_num,waitNum:i.wait_num}),I.b({vue:e,listen_route:i.listen_route,port:i.port,avatar:i.avatar,name:i.user_name,uid:i.user_id,store_id:i.store_id,is_ssl:i.is_ssl}))})}a.d(t,"d",function(){return n}),a.d(t,"e",function(){return i}),a.d(t,"f",function(){return s}),a.d(t,"c",function(){return m}),a.d(t,"i",function(){return r}),a.d(t,"j",function(){return o}),a.d(t,"a",function(){return g}),a.d(t,"h",function(){return u}),a.d(t,"g",function(){return d}),a.d(t,"b",function(){return c});var l=a("34+y"),f=(a.n(l),a("X+yh")),h=a.n(f),v=a("qONS"),p=(a.n(v),a("UQTY")),w=a.n(p),_=a("mtWM"),b=a.n(_),y=a("mw3O"),L=a.n(y),I=a("13DI")},RkRv:function(e,t,a){"use strict";t.a={name:"badge",props:{number:{type:Number}}}},Tgor:function(e,t,a){"use strict";function n(e){a("9qGQ")}var i=a("Z9Md"),s=a("fUs6"),o=a("VU/8"),r=n,u=o(i.a,s.a,!1,r,"data-v-6eac02e4",null);t.a=u.exports},ULTG:function(e,t){},V847:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("keep-alive",[e.$route.meta.notKeepAlive?e._e():a("router-view",{key:e.$route.fullPath,staticClass:"app-view"})],1),e._v(" "),e.$route.meta.notKeepAlive?a("router-view",{key:e.$route.fullPath,staticClass:"app-view"}):e._e(),e._v(" "),a("chat-footer"),e._v(" "),a("chat-message-footer"),e._v("\n  "+e._s(e.pageTransitionName)+"\n")],1)},i=[],s={render:n,staticRenderFns:i};t.a=s},VAhz:function(e,t,a){"use strict";var n,i,s,o=a("Gu7T"),r=a.n(o),u=a("Xxa5"),c=a.n(u),d=a("34+y"),m=(a.n(d),a("X+yh")),g=a.n(m),l=a("qONS"),f=(a.n(l),a("UQTY")),h=a.n(f),v=a("exGp"),p=a.n(v),w=a("bOdI"),_=a.n(w),b=a("woOf"),y=a.n(b),L=a("Dd8w"),I=a.n(L),k=a("Xu2r"),N=a("TXMN"),S=a("Pi6f"),x=a("lM2f"),M=a("13DI"),T={},O={setAvigatorNumber:function(e,t){(0,e.commit)(k.e,t)},comeMessage:function(e,t){var a=e.commit,n=e.rootState,i=e.state,s=i.message.messageList[t.from_id];t.goods_id&&s&&Number(s.goodsId)!==Number(t.goods_id)?S.c({goodsId:t.goods_id}).then(function(e){var i=e.data,s=i.code,o=i.goods_info;0===s&&a(k.f,{info:t,rootState:n,goodsInfo:o})}):a(k.f,{info:t,rootState:n}),a(k.g,{info:t,time:t.time})},comeWait:function(e,t){(0,e.commit)(k.h,{info:t})},sendMessage:function(e,t){var n=e.commit,i=e.rootState,s=(e.dispatch,a.i(x.a)(new Date,"hh:mm:ss"));if(t.msg||""!==t.msg){var o=a.i(M.c)({msg:t.msg,uid:t.uid,goods_id:t.goods_id}),r=o.avatar,u=o.name;n(k.i,{info:t,avatar:r,name:u,time:s,rootState:i}),n(k.g,{info:t,time:s,send:!0})}},insertInfo:function(e,t){var n=e.commit;a.i(M.d)(t),n(k.j,{customerId:t.uid})}},q=(n={},_()(n,k.e,function(e,t){var a=t.chatNum,n=t.waitNum;e.bottomNavigator.navs[0].number=a,e.bottomNavigator.navs[1].number=n}),_()(n,k.f,function(e,t){var a=t.info,n=t.rootState,i=t.goodsInfo;n.chat.message.bScroll=!0;var s=e.message.messageList[a.from_id];s&&(s.list.push({add_time:a.time,avatar:a.avatar,name:a.name,status:a.status,service_id:a.to_id,message:a.message,user_type:"2"}),i&&(s.goodsId=i.goods_id,s.list.push(I()({user_type:0},i))),e.message.messageList=y()({},e.message.messageList))}),_()(n,k.h,function(e,t){for(var a=t.info,n=e.visitor.visitorList.length,i=!1,s=0;s<n;s++)if(Number(e.visitor.visitorList[s].fid)===Number(a.from_id)){i=!0,e.visitor.visitorList[s].add_time=a.time,e.visitor.visitorList[s].message=a.message,e.visitor.visitorList[s].message_list.unshift(a.message),e.visitor.visitorList[s].num++,e.bottomNavigator.navs[1].number++;break}i||(e.visitor.visitorList.unshift({user_name:a.name,add_time:a.time,avatar:a.avatar,customer_id:a.from_id,goods_id:a.goods_id,message:a.message,message_list:[a.message],num:1,origin:a.origin,store_id:a.store_id}),e.bottomNavigator.navs[1].number++)}),_()(n,k.i,function(e,t){var a=t.info,n=t.avatar,i=t.time,s=t.name;t.rootState.chat.message.bScroll=!0,e.message.messageList.hasOwnProperty(a.uid)&&(e.message.messageList[a.uid].list.push({avatar:n||"",message:a.msg,add_time:i,user_type:"1",name:s}),e.message.messageList=y()({},e.message.messageList))}),_()(n,k.g,function(e,t){for(var a=t.info,n=t.time,i=t.send,s=e.dialogue.dialogueList.length,o=a.uid||a.from_id,r=a.msg||a.message,u=0;u<s;u++)if(Number(e.dialogue.dialogueList[u].customer_id)===Number(o)){if(e.dialogue.dialogueList[u].message instanceof Array)e.dialogue.dialogueList[u].message.unshift(r);else{var c=[e.dialogue.dialogueList[u].message];c.unshift(r),e.dialogue.dialogueList[u].message=c}e.dialogue.dialogueList[u].add_time=n,i||(e.dialogue.dialogueList[u].message_sum?e.dialogue.dialogueList[u].message_sum++:N.a.set(e.dialogue.dialogueList[u],"message_sum",1),e.bottomNavigator.navs[0].number++);break}}),_()(n,k.j,function(e,t){for(var a=t.customerId,n=e.visitor.visitorList.length,i=0,s=0;s<n;s++){Number(e.visitor.visitorList[s].customer_id)===Number(a)&&(i=e.visitor.visitorList[s].num,e.visitor.visitorList.splice(s,1));break}e.bottomNavigator.navs[1].number-=i}),n),F={};t.a={namespaced:!0,state:T,mutations:q,actions:O,getters:F,modules:{bottomNavigator:{namespaced:!0,state:{show:!1,navs:[{name:"dialogue",icon:"message",text:"对话",number:0,active:!0,route:{name:"chat/dialogue",path:"/chat/dialogue"}},{name:"visitor",icon:"visitors",text:"访客",number:0,active:!1,route:{name:"chat/visitor",path:"/chat/visitor"}},{name:"setting",icon:"setting",text:"设置",active:!1,route:{name:"chat/setting",path:"/chat/setting"}}]},actions:{activateChatFooterName:function(e,t){(0,e.commit)(k.k,t)},showBottomNav:function(e,t){(0,e.commit)(k.l,t)}},mutations:(i={},_()(i,k.k,function(e,t){e.navs=e.navs.map(function(e){return e.active=e.name===t,e})}),_()(i,k.l,function(e,t){e.show=t}),i)},dialogue:{namespaced:!0,state:{dialogueList:[]},actions:{getDialogueList:function(e,t){var a=e.commit;S.d().then(function(e){var t=e.data,n=(t.code,t.message_list),i=[];if(n instanceof Array)i=n;else for(var s in n)i.push(n[s]);a(k.m,i)})}},mutations:_()({},k.m,function(e,t){e.dialogueList=t})},visitor:{namespaced:!0,state:{visitorList:[]},actions:{getVisitorList:function(e,t){var a=e.commit;e.rootState;S.e().then(function(e){var t=e.data;0===t.code&&a(k.n,{visitorList:t.visit_list})})}},mutations:_()({},k.n,function(e,t){var a=t.visitorList;e.visitorList=a})},message:{namespaced:!0,state:{bScroll:!1,messageId:-1,messageList:{}},getters:{message:function(e){if(e.messageList[e.messageId])return e.messageList[e.messageId].list},page:function(e){if(e.messageList[e.messageId])return e.messageList[e.messageId].page}},actions:{setMessageId:function(e,t){var a=e.commit,n=t.messageId;a(k.o,{messageId:n})},setMessageList:function(e,t){var a=this,n=e.dispatch,i=e.commit,s=e.state;return p()(c.a.mark(function e(){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!s.messageList.hasOwnProperty(t.id)||"default"!==t.type){e.next=2;break}return e.abrupt("return",!1);case 2:if("default"!==t.type){e.next=6;break}n("setMessageId",{messageId:t.id}),e.next=8;break;case 6:return e.next=8,n("changePage");case 8:h.a.open({text:"加载中..."}),S.f({id:t.id,sid:t.sid,type:t.type,defaults:t.defaults,page:t.page}).then(function(e){var a=e.data,n=a.code,s=a.message_list,o=a.goods;if(h.a.close(),0===n){var r=s.length,u=[];if(r>0)for(var c=r-1;c>=0;c--)u.push(s[c]);i(k.p,{messageId:t.id,messageList:u,type:t.type,goods:o})}else g()("没有更多了……")});case 10:case"end":return e.stop()}},e,a)}))()},changeToRead:function(e,t){var a=e.commit,n=e.rootState,i=t.userId;S.g({userId:i}).then(function(){a(k.q,{rootState:n,userId:i})})},changePage:function(e){var t=this,a=e.commit;return p()(c.a.mark(function e(){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a(k.r);case 1:case"end":return e.stop()}},e,t)}))()}},mutations:(s={},_()(s,k.o,function(e,t){var a=t.messageId;e.messageId=a}),_()(s,k.p,function(e,t){var a=t.messageId,n=t.messageList,i=t.type,s=t.goods;if(e.bScroll=!1,"default"===i)N.a.set(e.messageList,a,{page:1,list:n,goodsId:s?s.goods_id:0}),e.messageList[a].list.push(I()({user_type:0},s));else{var o;(o=e.messageList[a].list).unshift.apply(o,r()(n)),e.messageList=y()({},e.messageList)}}),_()(s,k.q,function(e,t){for(var a=t.rootState,n=t.userId,i=a.chat.dialogue.dialogueList.length,s=0,o=0;o<i;o++)if(0!==a.chat.dialogue.dialogueList[o].message_sum&&Number(a.chat.dialogue.dialogueList[o].customer_id)===Number(n)){s=a.chat.dialogue.dialogueList[o].message_sum||0,a.chat.dialogue.dialogueList[o].message_sum=0,a.chat.dialogue=y()({},a.chat.dialogue),a.chat.bottomNavigator.navs[0].number-=s;break}}),_()(s,k.r,function(e){e.messageList[e.messageId].page++}),s)},messageBottomInput:{namespaced:!0,state:{show:!1},actions:{showMessageInput:function(e,t){(0,e.commit)(k.s,t)}},mutations:_()({},k.s,function(e,t){e.show=t})},settingInfo:{namespaced:!0,state:{userInfo:{image:"",name:"",fit:""},account:""},actions:{getSettingInfo:function(e){var t=e.commit;h.a.open({text:"加载中..."}),S.h().then(function(e){var a=e.data,n=a.data;0===a.code&&(t(k.t,n),h.a.close())})}},mutations:_()({},k.t,function(e,t){e.userInfo.name=t.nick_name,e.userInfo.image=t.service_avatar,e.account=t.user_name})}}}},VfN8:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement;return(e._self._c||t)("button",{staticClass:"ec-button"},[e._v("\n  "+e._s(e.text)+"\n")])},i=[],s={render:n,staticRenderFns:i};t.a=s},Vym9:function(e,t,a){"use strict";var n=a("Dd8w"),i=a.n(n),s=a("NYxO"),o=a("qkow"),r=a("Tgor");t.a={name:"chat-footer",data:function(){return{message:"",num:0}},components:{EcButton:o.a,Face:r.a},computed:i()({},a.i(s.a)("chat/messageBottomInput",["show"]),a.i(s.a)(["bFace"])),methods:i()({},a.i(s.b)("chat",["sendMessage"]),a.i(s.b)(["showFaceDialog"]),{addFace:function(e){this.message+=e,this.$el.querySelector(".input").innerHTML+=e},scrollShow:function(){var e=document.querySelector(".message");e.scrollTop=e.scrollHeight-e.offsetHeight;var t=window.navigator.userAgent;if(t.indexOf("Safari")<=-1||t.indexOf("ECJiaBrowse")<=-1)return!1;var a=this.$el.querySelector(".input");setTimeout(function(){a.scrollIntoViewIfNeeded()},500)},changMessage:function(e){this.message=e.srcElement.innerHTML},thisSendMessage:function(e){this.sendMessage(e),this.message="",this.$el.querySelector(".input").innerHTML="",this.$el.querySelector(".input").focus()}})}},Xu2r:function(e,t,a){"use strict";a.d(t,"d",function(){return n}),a.d(t,"a",function(){return i}),a.d(t,"e",function(){return s}),a.d(t,"b",function(){return o}),a.d(t,"c",function(){return r}),a.d(t,"j",function(){return u}),a.d(t,"f",function(){return c}),a.d(t,"h",function(){return d}),a.d(t,"i",function(){return m}),a.d(t,"g",function(){return g}),a.d(t,"k",function(){return l}),a.d(t,"l",function(){return f}),a.d(t,"s",function(){return h}),a.d(t,"m",function(){return v}),a.d(t,"n",function(){return p}),a.d(t,"t",function(){return w}),a.d(t,"o",function(){return _}),a.d(t,"p",function(){return b}),a.d(t,"q",function(){return y}),a.d(t,"r",function(){return L});var n="setPageTransitionName",i="saveScrollTop",s="setNavigatorNumber",o="getImageFiles",r="showFaceDialog",u="chat/insertInfo",c="chat/comeMessage",d="chat/comeWait",m="chat/sendMessage",g="chat/newDialogue",l="chat/activateChatFooterNav",f="chat/showBottomNav",h="chat/showMessageInput",v="chat/getDialogueList",p="chat/getVisitorList",w="setting/getSettingInfo",_="message/setMessageId",b="message/setMessageList",y="message/changeToRead",L="message/changePage"},YaEn:function(e,t,a){"use strict";function n(e,t){if(e.name&&-1!==S.indexOf(e.name))return M.length=0,!1;if(t.name&&-1!==S.indexOf(t.name))return M.push(e.fullPath),!0;if(e.name&&-1!==x.indexOf(e.name))return M.push(e.fullPath),!0;var a=M.indexOf(e.fullPath);return-1!==a?(M.length=a+1,!1):(M.push(e.fullPath),!0)}var i=a("34+y"),s=(a.n(i),a("X+yh")),o=a.n(s),r=a("mvHQ"),u=a.n(r),c=a("Xu2r"),d=a("7+uW"),m=a("/ocq"),g=a("mtWM"),l=a.n(g),f=a("UZ5h"),h=a.n(f),v=a("mw3O"),p=a.n(v),w=a("Pi6f"),_=function(){return a.e(2).then(a.bind(null,"nt9Z"))},b=function(){return a.e(1).then(a.bind(null,"WHOy"))},y=function(){return a.e(0).then(a.bind(null,"osDW"))},L=function(){return a.e(3).then(a.bind(null,"RdYp"))},I=function(){return a.e(5).then(a.bind(null,"QGR8"))},k=function(){return a.e(4).then(a.bind(null,"cTYd"))};d.default.use(m.a);var N=new m.a({mode:"hash",routes:[{path:"/",name:"",component:_,meta:{requiresAuth:!0}},{path:"/chat",name:"chat",component:_,meta:{requiresAuth:!0}},{path:"/chat/dialogue",name:"chat/dialogue",component:_,meta:{requiresAuth:!0}},{path:"/chat/visitor",name:"chat/visitor",component:b,meta:{requiresAuth:!0}},{path:"/chat/setting",name:"chat/setting",component:y,meta:{requiresAuth:!0}},{path:"/chat/message",name:"chat/message",component:L,meta:{notKeepAlive:!0,requiresAuth:!0}},{path:"/chat/login",name:"chat/login",component:I},{path:"/chat/update/password",name:"chat/update/password",component:k,meta:{requiresAuth:!0}}]});N.beforeEach(function(e,t,i){if("chat/message"===t.name&&"chat/login"===e.name&&N.push("/chat"),N.app.$store){if(N.app.$store.state.needPageTransition){var s=n(e,t)?"slide-left":"slide-right";N.app.$store.commit(c.d,{pageTransitionName:s})}}else n(e,t);if(e.matched.some(function(e){return e.meta.requiresAuth})){var r=localStorage.getItem("token"),d=h.a.parse(window.location.href),m=p.a.parse(d.query);if(r)i();else if("1"!==m.is_admin||"chat"!==e.name&&"chat/dialogue"!==e.name)o()({message:"请登录后进行操作",position:"middle",duration:1600}),i({path:"/chat/login",query:{redirect:e.fullPath}});else{var g=JSON.parse(u()(m)),f="";["connect_code","user_id","is_admin"].forEach(function(e){delete g[e]});for(var v in g)f+=v+"="+g[v]+"&";f=f.substring(0,f.length-1),f=d.protocol+"//"+d.host+d.pathname+"?"+f+"#/chat",a.i(w.i)({user_id:m.user_id,is_admin:m.is_admin,connect_code:m.connect_code}).then(function(e){var t=e.data,a=t.code,n=(t.msg,t.token);t.user_id;0===a&&(localStorage.setItem("token",n),l.a.defaults.headers.common.token=n||"",window.location=f)})}}else i()});var S=["chat/dialogue"],x=[],M=[];window.router=N,t.a=N},Z9Md:function(e,t,a){"use strict";var n=a("Dd8w"),i=a.n(n),s=a("NYxO");t.a={name:"face",data:function(){return{}},created:function(){this.getImageFiles()},computed:i()({},a.i(s.a)(["aFace"]),{imgHttp:function(){return window.ROOT_URL?window.ROOT_URL:window.imgHttp+"/dsc/mobile/"}}),methods:i()({},a.i(s.b)(["getImageFiles","showFaceDialog"]),{getImage:function(e){this.$emit("add-face",e.srcElement.outerHTML),this.showFaceDialog({bShow:!1})}})}},"Zw+j":function(e,t,a){"use strict";var n=a("Zrlr"),i=a.n(n),s=a("wxAW"),o=a.n(s),r=function(){function e(){i()(this,e)}return o()(e,[{key:"delHtmlTag",value:function(e){return e.replace(/<[^>]+>/g,"")}},{key:"updateImageTag",value:function(e){return e.replace(/<img [^>]*src=['"][^'"]+[^>]*>/g,"[图片]")}}]),e}();t.a=r},clLD:function(e,t,a){"use strict";function n(e){a("6yGq")}var i=a("xsN0"),s=a("JOaO"),o=a("VU/8"),r=n,u=o(i.a,s.a,!1,r,"data-v-4371cabe",null);t.a=u.exports},fUs6:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"face"},[a("ul",e._l(e.aFace,function(t){return a("li",{key:t},[a("img",{attrs:{src:e.imgHttp+"public/vendor/layui/images/face/"+t+".gif",alt:""},on:{click:function(t){return t.stopPropagation(),e.getImage(t)}}})])}))])},i=[],s={render:n,staticRenderFns:i};t.a=s},kBzv:function(e,t,a){"use strict";var n=a("7+uW"),i=(a("Kkag"),a("MrDs")),s=new i.a;window.requestUrl=function(e){return window.ROOT_URL?window.ROOT_URL+"index.php?m="+e:"https://www.16too.com/index.php?m="+e};var o=["chat/message"];n.default.mixin({beforeRouteEnter:function(e,t,a){a(function(t){-1===o.indexOf(e.name)&&(t.$el.scrollTop=t.$store.state.historyPageScrollTop[e.fullPath]||0)})},beforeRouteLeave:function(e,t,a){-1===o.indexOf(t.name)&&this.$store.dispatch("saveScrollTop",{path:t.fullPath,scrollTop:this.$el.scrollTop}),a()}}),n.default.prototype.release=!0,window.imgHttp=(n.default.prototype.release,""),n.default.filter("messageNew",s.messageNew)},lM2f:function(e,t,a){"use strict";function n(e,t){var a=function(e){return e+="",e.replace(/^(\d)$/,"0$1")},n={yyyy:e.getFullYear(),yy:e.getFullYear().toString().substring(2),M:e.getMonth()+1,MM:a(e.getMonth()+1),d:e.getDate(),dd:a(e.getDate()),hh:e.getHours(),mm:e.getMinutes(),ss:e.getSeconds()};return t||(t="yyyy-MM-dd hh:mm:ss"),t.replace(/([a-z])(\1)*/gi,function(e){return n[e]})}a.d(t,"a",function(){return n})},qONS:function(e,t){},qkow:function(e,t,a){"use strict";function n(e){a("u4xP")}var i=a("48ln"),s=a("VfN8"),o=a("VU/8"),r=n,u=o(i.a,s.a,!1,r,null,null);t.a=u.exports},u4xP:function(e,t){},xJD8:function(e,t,a){"use strict";var n=a("Dd8w"),i=a.n(n),s=a("NYxO"),o=a("clLD"),r=a("BwjS"),u=a("Pi6f");t.a={name:"app",components:{ChatFooter:o.a,ChatMessageFooter:r.a},created:function(){localStorage.getItem("token")&&u.a(this)},computed:i()({},a.i(s.a)(["pageTransitionName"])),methods:i()({},a.i(s.b)("chat",["comeMessage","comeWait","setAvigatorNumber"]))}},xsN0:function(e,t,a){"use strict";var n=a("Dd8w"),i=a.n(n),s=a("NYxO"),o=a("6CWX");t.a={name:"chat-footer",components:{Badge:o.a},computed:i()({},a.i(s.a)("chat/bottomNavigator",["show","navs"]))}},yrzX:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement;return(e._self._c||t)("em",{staticClass:"badge"},[e._v("\n  "+e._s(e.number)+"\n")])},i=[],s={render:n,staticRenderFns:i};t.a=s}},["NHnr"]);